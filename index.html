<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Diary Assist Buddy (Demo)</title>
<link rel="apple-touch-icon" href="icon.png" />
<link rel="icon" type="image/png" href="icon.png" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --purple: #6b63ff;
      --bg: #f3f6ff;
      --card-bg: #ffffff;
      --border: #d7ddff;
      --accent: #ffb547;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 24px 12px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, #eef1ff 0, #f6f8ff 40%, #ffffff 100%);
      display: flex;
      justify-content: center;
    }
    .frame {
      width: 100%;
      max-width: 480px;
    }
    .header-chip {
      background: #fff;
      border-radius: 999px;
      padding: 10px 18px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.08);
      margin-bottom: 10px;
    }
    .header-chip span.icon {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: linear-gradient(135deg, #ffda7b, #ff9c6c);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    .header-chip span.title {
      font-weight: 700;
      font-size: 16px;
      color: #444;
    }
    .subtitle {
      font-size: 13px;
      color: #5f6ac9;
      margin-bottom: 18px;
    }
    .card {
      background: var(--card-bg);
      border-radius: 26px;
      padding: 20px 18px 22px;
      box-shadow: 0 16px 30px rgba(67, 88, 168, 0.18);
    }
    h2 {
      font-size: 18px;
      margin: 0 0 6px;
      color: #4350b5;
      text-align: center;
    }
    h2 span {
      font-size: 18px;
    }
    .section-caption {
      font-size: 12px;
      color: #777;
      text-align: center;
      margin-bottom: 18px;
    }
    label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #444;
    }
    .hint {
      font-size: 11px;
      color: #999;
      margin-bottom: 6px;
    }
    select, textarea {
      width: 100%;
      border-radius: 14px;
      border: 1px solid var(--border);
      padding: 9px 11px;
      font-size: 14px;
      font-family: inherit;
      outline: none;
      background: #fbfcff;
      margin-bottom: 12px;
    }
    textarea {
      resize: vertical;
      min-height: 70px;
    }
    .tone-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 18px;
    }
    .tone-chip {
      border-radius: 999px;
      border: 1px solid #d3d7ff;
      padding: 6px 10px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: #f6f7ff;
      cursor: pointer;
      color: #555;
    }
    .tone-chip span.icon {
      font-size: 14px;
    }
    .tone-chip.active {
      background: var(--purple);
      border-color: var(--purple);
      color: #fff;
    }
    .tone-chip.active span.icon {
      transform: translateY(-1px);
    }
    button {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 11px 10px;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(135deg, #6b63ff, #a16bff);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin-bottom: 18px;
      box-shadow: 0 10px 20px rgba(83, 76, 194, 0.4);
    }
    button:disabled {
      opacity: 0.7;
      cursor: default;
      box-shadow: none;
    }
    button span.icon {
      font-size: 16px;
    }
    .result-wrapper {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .result-card {
      border-radius: 18px;
      padding: 12px 12px 14px;
      background: #f7f7ff;
      border: 1px solid #e0e2ff;
      min-height: 70px;
      font-size: 13px;
      color: #333;
      white-space: pre-wrap;
    }
    .result-title {
      font-size: 12px;
      font-weight: 600;
      color: #5a64c0;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .result-title span.icon {
      font-size: 14px;
    }
    .advice-item {
      border-radius: 14px;
      padding: 9px 10px;
      background: #fff;
      border: 1px dashed #d9ddff;
      font-size: 12px;
      margin-bottom: 6px;
    }
    .advice-label {
      font-weight: 600;
      margin-bottom: 3px;
    }
    .advice-before {
      color: #999;
      margin-bottom: 2px;
    }
    .advice-after {
      color: #444;
      margin-bottom: 2px;
    }
    .advice-comment {
      color: #777;
      font-size: 11px;
    }
    .footer-note {
      font-size: 10px;
      color: #aaa;
      margin-top: 10px;
      text-align: center;
    }
    @media (max-width: 400px) {
      .card { padding: 18px 14px 20px; }
      .header-chip { padding: 8px 14px; }
    }
  </style>
</head>
<body>
  <div class="frame">
    <div class="header-chip">
      <span class="icon">ğŸ“</span>
      <span class="title">Diary Assist Buddy</span>
    </div>
    <div class="subtitle">ä»Šæ—¥ã®å‡ºæ¥äº‹ã‚’ã„ã£ã—ã‚‡ã«æ—¥è¨˜ã«ã¾ã¨ã‚ã‚‹ãƒ‡ãƒ¢ç‰ˆã‚¢ãƒ—ãƒª</div>

    <div class="card">
      <h2>âœ¨ æ—¥è¨˜ã®ã˜ã‚…ã‚“ã³ âœ¨</h2>
      <div class="section-caption">å­¦å¹´ã¨ä»Šæ—¥ã®å‡ºæ¥äº‹ãƒ»æ°—æŒã¡ã‚’å…¥ã‚Œã‚‹ã¨ã€ã‚µãƒ³ãƒ—ãƒ«ã®æ—¥è¨˜æ–‡ã‚’ã¤ãã‚Šã¾ã™ã€‚</div>

      <label for="grade">å­¦å¹´ï¼ˆãŒãã­ã‚“ï¼‰</label>
      <select id="grade">
        <option value="å°1">å°1</option>
        <option value="å°2">å°2</option>
        <option value="å°3">å°3</option>
        <option value="å°4">å°4</option>
        <option value="å°5">å°5</option>
        <option value="å°6">å°6</option>
      </select>

      <label>æ–‡ä½“ï¼ˆã¶ã‚“ãŸã„ï¼‰</label>
      <div class="hint">èª­ã¿ã‚„ã™ã•ã‚„ã€ãµã‚“ã„ãã«åˆã‚ã›ã¦ãˆã‚‰ã³ã¾ã™ã€‚</div>
      <div class="tone-chips" id="toneChips">
        <div class="tone-chip active" data-tone="ã‚·ãƒ³ãƒ—ãƒ«"><span class="icon">ğŸ“˜</span>ã‚·ãƒ³ãƒ—ãƒ«</div>
        <div class="tone-chip" data-tone="ä¸å¯§"><span class="icon">ğŸŒ¿</span>ä¸å¯§</div>
        <div class="tone-chip" data-tone="ã‹ã‚ã„ã„"><span class="icon">ğŸ’«</span>ã‹ã‚ã„ã„</div>
      </div>

      <label for="event">å‡ºæ¥äº‹ï¼ˆãªã«ã‚’ã—ãŸã®ï¼Ÿï¼‰</label>
      <div class="hint">ä¾‹ï¼šä»Šæ—¥ã¯å­¦æ ¡ã®å¸°ã‚Šã«å…¬åœ’ã§å‹ã ã¡ã¨é¬¼ã”ã£ã“ã‚’ã—ã¾ã—ãŸã€‚</div>
      <textarea id="event"></textarea>

      <label for="feeling">æ€ã£ãŸã“ã¨ï¼ˆã©ã†æ€ã£ãŸï¼Ÿï¼‰</label>
      <div class="hint">ä¾‹ï¼šãŸãã•ã‚“èµ°ã£ã¦ããŸããŸã«ãªã£ãŸã‘ã©ã€ã¨ã¦ã‚‚æ¥½ã—ã‹ã£ãŸã§ã™ã€‚</div>
      <textarea id="feeling"></textarea>

      <button id="generateBtn">
        <span class="icon">ğŸš€</span>
        æ—¥è¨˜æ¡ˆã‚’ã¤ãã‚‹ï¼ˆãƒ‡ãƒ¢ï¼‰
      </button>

      <div class="result-wrapper">
        <div class="result-card" id="resultDiary">
          <div class="result-title"><span class="icon">ğŸ“—</span>æ—¥è¨˜ã®ä¸‹æ›¸ãï¼ˆSampleï¼‰</div>
          <div id="diaryText">
ãã‚‡ã†ã®å‡ºæ¥äº‹ã‚’å…¥ã‚Œã¦ã€Œæ—¥è¨˜æ¡ˆã‚’ã¤ãã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ã“ã“ã«ã‚µãƒ³ãƒ—ãƒ«ã®æ—¥è¨˜ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
          </div>
        </div>

        <div class="result-card" id="resultAdvice">
          <div class="result-title"><span class="icon">ğŸ’¡</span>ã“ã¨ã°ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼ˆSampleï¼‰</div>
          <div id="adviceList">
            æ–‡ç« ã‚’å°‘ã—ã ã‘è‰¯ãã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã‚’ã€ã„ãã¤ã‹è¡¨ç¤ºã—ã¾ã™ã€‚
          </div>
        </div>
      </div>

      <div class="footer-note">
        â€» ã“ã®ãƒšãƒ¼ã‚¸ã¯ GitHub Pages ç”¨ã®ãƒ‡ãƒ¢ç‰ˆã§ã™ã€‚æ–‡ã®ç”Ÿæˆã¯ã€ã‹ã‚“ãŸã‚“ãªãƒ«ãƒ¼ãƒ«ã§è¡Œã£ã¦ã„ã¾ã™ã€‚
      </div>
    </div>
  </div>

  <script>
    // ãƒˆãƒ¼ãƒ³é¸æŠ
    const toneChips = document.querySelectorAll(".tone-chip");
    let currentTone = "ã‚·ãƒ³ãƒ—ãƒ«";
    toneChips.forEach(chip => {
      chip.addEventListener("click", () => {
        toneChips.forEach(c => c.classList.remove("active"));
        chip.classList.add("active");
        currentTone = chip.dataset.tone;
      });
    });

    function buildDiary(grade, tone, eventText, feeling) {
      const ev = eventText || "ä»Šæ—¥ã¯å­¦æ ¡ã®å¸°ã‚Šã«å…¬åœ’ã§å‹ã ã¡ã¨éŠã³ã¾ã—ãŸã€‚";
      const fe = feeling || "ãŸãã•ã‚“èµ°ã£ã¦å°‘ã—ã¤ã‹ã‚ŒãŸã‘ã‚Œã©ã€ã¨ã¦ã‚‚æ¥½ã—ã‹ã£ãŸã§ã™ã€‚";

      let intro = "";
      let tail = "";

      // å­¦å¹´åˆ¥ã®ã—ã‚æ–¹
      switch (grade) {
        case "å°1":
        case "å°2":
          tail = "ã¾ãŸã“ã‚“ãªä¸€æ—¥ã«ãªã‚‹ã¨ã„ã„ãªã¨æ€ã„ã¾ã—ãŸã€‚";
          break;
        case "å°3":
        case "å°4":
          tail = "ã“ã®çµŒé¨“ã‚’ã¨ãŠã—ã¦ã€ã¾ãŸå‹ã ã¡ã¨ã‚ãã³ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚";
          break;
        case "å°5":
        case "å°6":
          tail = "ã“ã®ä¸€æ—¥ã‚’é€šã—ã¦ã€å‹ã ã¡ã¨éã”ã™æ™‚é–“ã®å¤§åˆ‡ã•ã‚’ã‚ã‚‰ãŸã‚ã¦æ„Ÿã˜ã¾ã—ãŸã€‚";
          break;
      }

      // æ–‡ä½“åˆ¥
      if (tone === "ã‚·ãƒ³ãƒ—ãƒ«") {
        intro = "ãã‚‡ã†ã¯ã€" + ev + "ã€‚\n" + fe;
      } else if (tone === "ä¸å¯§") {
        intro = "ä»Šæ—¥ã¯ã€" + ev + "ã€‚\n" + fe.replace(/ã§ã™ã€‚?$/, "ã§ã—ãŸã€‚");
      } else { // ã‹ã‚ã„ã„
        intro = "ãã‚‡ã†ã¯ " + ev + "ã‚ˆã€‚\n" + fe.replace(/ã§ã™ã€‚?$/, "ã ã£ãŸã‚ˆã€‚");
      }

      return `â–¼æ—¥è¨˜ï¼ˆ${grade}ãƒ»${tone}ï¼‰\n${intro}\n\n${tail}`;
    }

    function buildAdvice(eventText, feeling) {
      const advs = [];
      const hasTanoshii = /æ¥½ã—ã‹ã£ãŸ/.test(feeling);
      const hasSugoi = /ã™ã”ã‹ã£ãŸ|ã™ã”ã|ã¨ã¦ã‚‚/.test(feeling);

      if (hasTanoshii) {
        advs.push({
          label: "ã€Œæ¥½ã—ã‹ã£ãŸã€ã‚’ã‚‚ã†ä¸€æ­©ãã‚ã—ã",
          before: feeling,
          after: feeling.replace("æ¥½ã—ã‹ã£ãŸ", "å‹ã ã¡ã¨ãŸãã•ã‚“èµ°ã‚Šå›ã‚Œã¦æ¥½ã—ã‹ã£ãŸ"),
          comment: "ã€Œãªã«ãŒã€æ¥½ã—ã‹ã£ãŸã‹ã‚’æ›¸ãã¨ã€ã‚ˆã‚“ã äººã«ã‚ˆã†ã™ãŒä¼ã‚ã‚Šã¾ã™ã€‚"
        });
      }
      if (!eventText) {
        advs.push({
          label: "å‡ºæ¥äº‹ã‚’ã‚‚ã†å°‘ã—ã ã‘",
          before: "ï¼ˆå‡ºæ¥äº‹ãŒç©ºç™½ï¼‰",
          after: "ãã‚‡ã†ã€å­¦æ ¡ã®å¸°ã‚Šã«å…¬åœ’ã§å‹ã ã¡ã¨ã‚ãã³ã¾ã—ãŸã€‚",
          comment: "ã©ã“ã§ãƒ»ã ã‚Œã¨ãƒ»ãªã«ã‚’ã—ãŸã‹ã‚’ä¸€æ–‡ã§æ›¸ã„ã¦ã¿ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚"
        });
      }
      if (!hasSugoi && feeling) {
        advs.push({
          label: "æ°—æŒã¡ã‚’ãµã‚„ã—ã¦ã¿ã‚‹",
          before: feeling,
          after: feeling + "ã€€ã¨ã¦ã‚‚ã‚ãã‚ãã—ãŸæ°—æŒã¡ã«ãªã‚Šã¾ã—ãŸã€‚",
          comment: "æœ€å¾Œã«æ°—æŒã¡ã‚’ä¸€è¨€ä»˜ã‘è¶³ã™ã¨ã€èª­ã¿æ‰‹ã«å¿ƒã®ã‚ˆã†ã™ãŒä¼ã‚ã‚Šã¾ã™ã€‚"
        });
      }

      if (advs.length === 0) {
        return `<div class="advice-item">
  <div class="advice-label">ä»Šæ—¥ã¯ãã®ã¾ã¾ã§ã‚‚ã™ã¦ããªæ—¥è¨˜ã«ãªã£ã¦ã„ã¾ã™ã€‚</div>
  <div class="advice-comment">æ›¸ã‘ãŸã“ã¨ã‚’ã»ã‚ã¦ã‚ã’ã‚‹æ™‚é–“ã‚‚ãŸã„ã›ã¤ã«ã—ãŸã„ã§ã™ã­ã€‚</div>
</div>`;
      }

      return advs.map(a => `
<div class="advice-item">
  <div class="advice-label">ãƒ»${a.label}</div>
  <div class="advice-before">Beforeï¼š${a.before}</div>
  <div class="advice-after">Afterï¼š${a.after}</div>
  <div class="advice-comment">${a.comment}</div>
</div>
`).join("");
    }

    document.getElementById("generateBtn").addEventListener("click", () => {
      const grade = document.getElementById("grade").value;
      const ev = document.getElementById("event").value.trim();
      const fe = document.getElementById("feeling").value.trim();

      const diary = buildDiary(grade, currentTone, ev, fe);
      const adviceHtml = buildAdvice(ev, fe);

      document.getElementById("diaryText").textContent = diary;
      document.getElementById("adviceList").innerHTML = adviceHtml;
    });
  </script>
</body>
</html>
